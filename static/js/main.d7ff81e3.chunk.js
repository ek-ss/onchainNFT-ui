(this["webpackJsonpdapp-scaffold"]=this["webpackJsonpdapp-scaffold"]||[]).push([[0],{1124:function(e,t){},114:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));n(38);var r=n(47),a=n(0);n(67),n(215),new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:8});function i(e,t){var n=Object(a.useState)((function(){var n=localStorage.getItem(e);return n?JSON.parse(n):t})),i=Object(r.a)(n,2),o=i[0],c=i[1],s=Object(a.useCallback)((function(t){o!==t&&(c(t),null===t?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(t)))}),[o,e]);return[o,s]}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"".concat(e.slice(0,t),"...").concat(e.slice(-t))}new Set(["USDC","wUSDC","USDT"]);function c(e,t){return Array.apply(0,new Array(Math.ceil(e.length/t))).map((function(n,r){return e.slice(r*t,(r+1)*t)}))}new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});var s=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),u={format:function(e,t){return e?t&&function(e){return e<.001&&e>0}(e)?.001:s.format(e):"--"}};new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:9}),new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2})},1150:function(e,t){},1152:function(e,t){},136:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return w})),n.d(t,"c",(function(){return _})),n.d(t,"e",(function(){return S})),n.d(t,"a",(function(){return N})),n.d(t,"f",(function(){return C})),n.d(t,"d",(function(){return B}));var r=n(274),a=n(47),i=n(38),o=n(8),c=n.n(o),s=n(13),u=n(41),l=n(0),d=n.n(l),f=n(89),p=n(98),b=n(26),h=n(108),m=n(114),O=n(772),g=(n(773),n(276)),v=n(29),j=d.a.createContext(null),T=new Map,y=new Map,A=new Map,w=function(t,n){var r=e.from(n.data),a=P(r);return{pubkey:t,account:Object(u.a)({},n),info:a}},E=function(t,n){var r=e.from(n.data),a=D(r);return{pubkey:t,account:Object(u.a)({},n),info:a}},x=new Map,_={emitter:new O.a,query:function(){var e=Object(s.a)(c.a.mark((function e(t,n,r){var a,i,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="string"===typeof n?new b.d(n):n,i=a.toBase58(),!(o=y.get(i))){e.next=5;break}return e.abrupt("return",o);case 5:if(!(s=T.get(i))){e.next=8;break}return e.abrupt("return",s);case 8:return s=t.getAccountInfo(a).then((function(e){if(!e)throw new Error("Account not found");return _.add(a,e,r)})),T.set(i,s),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),add:function(e,t,n){if(0!==t.data.length){var r="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),a=n||x.get(r);if(!a)throw new Error("Deserializer needs to be registered or passed as a parameter");_.registerParser(e,a),T.delete(r);var i=a(new b.d(r),t);if(i){var o=!y.has(r);return y.set(r,i),_.emitter.raiseCacheUpdated(r,o,a),i}}},get:function(e){var t;return t="string"!==typeof e?e.toBase58():e,y.get(t)},delete:function(e){var t;return t="string"!==typeof e?e.toBase58():e,!!y.get(t)&&(y.delete(t),_.emitter.raiseCacheDeleted(t),!0)},byParser:function(e){var t,n=[],r=Object(i.a)(x.keys());try{for(r.s();!(t=r.n()).done;){var a=t.value;x.get(a)===e&&n.push(a)}}catch(o){r.e(o)}finally{r.f()}return n},registerParser:function(e,t){if(e){var n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();x.set(n,t)}return e},addTransaction:function(e,t){return A.set(e,t),t},addBulkTransactions:function(e){var t,n=Object(i.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;A.set(r.signature.signature,r)}}catch(a){n.e(a)}finally{n.f()}return e},getTransaction:function(e){return A.get(e)},getAllTransactions:function(){return A},clear:function(){y.clear(),A.clear(),_.emitter.raiseCacheCleared()}},S=function(){return Object(l.useContext)(j)};var I=function(){var e=Object(f.d)(),t=Object(p.b)(),n=t.wallet,r=t.publicKey,i=Object(l.useState)(),o=Object(a.a)(i,2),c=o[0],s=o[1],u=Object(l.useCallback)((function(t){if(e&&r){var n=function(e,t){if(t)return{pubkey:e,account:t,info:{address:e,mint:g.a,owner:e,amount:new h.d(t.lamports),delegate:null,delegatedAmount:new h.d(0),isInitialized:!0,isFrozen:!1,isNative:!0,rentExemptReserve:null,closeAuthority:null}}}(r,t);if(void 0!==n){var a=r.toBase58();_.registerParser(a,E),y.set(a,n),_.emitter.raiseCacheUpdated(a,!1,E)}}}),[r,e]);return Object(l.useEffect)((function(){e&&r&&(e.getAccountInfo(r).then((function(e){e&&(u(e),s(e))})),e.onAccountChange(r,(function(e){e&&(u(e),s(e))})))}),[s,n,r,e,u]),{nativeAccount:c}},L=new Set,k=function(){var e=Object(s.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return L.add(n.toBase58()),e.next=5,t.getTokenAccountsByOwner(n,{programId:Object(g.b)().token});case 5:e.sent.value.forEach((function(e){_.add(e.pubkey.toBase58(),e.account,E)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function N(e){var t=e.children,n=void 0===t?null:t,r=Object(f.d)(),i=Object(p.b)(),o=i.publicKey,c=i.wallet,s=i.connected,u=Object(l.useState)([]),d=Object(a.a)(u,2),m=d[0],O=d[1],T=Object(l.useState)([]),y=Object(a.a)(T,2),A=y[0],w=y[1],x=I().nativeAccount,S=Object(l.useCallback)((function(){if(!o)return[];var e=o.toBase58();return _.byParser(E).map((function(e){return _.get(e)})).filter((function(t){return t&&t.info.owner.toBase58()===e})).map((function(e){return e}))}),[o]);return Object(l.useEffect)((function(){var e=S().filter((function(e){return void 0!==e}));w(e)}),[x,c,m,S]),Object(l.useEffect)((function(){var e=[];return _.emitter.onCache((function(e){if(e.isNew){var t=e.id,n=e.parser;r.onAccountChange(new b.d(t),(function(e){_.add(t,e,n)}))}})),function(){e.forEach((function(e){return r.removeAccountChangeListener(e)}))}}),[r]),Object(l.useEffect)((function(){if(r&&o){k(r,o).then((function(){O(S())}));var e=r.onProgramAccountChange(Object(g.b)().token,(function(e){var t=e.accountId;if(e.accountInfo.data.length===h.a.span){var n=D(e.accountInfo.data);L.has(n.owner.toBase58())&&(_.add(t,e.accountInfo,E),O(S()))}}),"singleGossip");return function(){r.removeProgramAccountChangeListener(e)}}O([])}),[r,s,o,S]),Object(v.jsx)(j.Provider,{value:{userAccounts:A,nativeAccount:x},children:n})}function C(){return{account:Object(l.useContext)(j).nativeAccount}}var B=function(){var t=Object(s.a)(c.a.mark((function t(n,a,i){var o,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(Object(m.a)(a,99).map((function(e){return R(n,e,i)})));case 2:return o=t.sent,s=o.map((function(t){return t.array.map((function(t){if(t){var n=t.data,a=Object(r.a)(t,["data"]);return Object(u.a)(Object(u.a)({},a),{},{data:e.from(n[0],"base64")})}})).filter((function(e){return e}))})).flat(),t.abrupt("return",{keys:a,array:s});case 5:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),R=function(){var e=Object(s.a)(c.a.mark((function e(t,n,r){var a,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t._buildArgs([n],r,"base64"),e.next=3,t._rpcRequest("getMultipleAccounts",a);case 3:if(!(i=e.sent).error){e.next=6;break}throw new Error("failed to get info about account "+i.error.message);case 6:if(!i.result.value){e.next=9;break}return o=i.result.value,e.abrupt("return",{keys:n,array:o});case 9:throw new Error;case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();var D=function(e){var t=h.a.decode(e);return t.mint=new b.d(t.mint),t.owner=new b.d(t.owner),t.amount=h.d.fromBuffer(t.amount),0===t.delegateOption?(t.delegate=null,t.delegatedAmount=new h.d(0)):(t.delegate=new b.d(t.delegate),t.delegatedAmount=h.d.fromBuffer(t.delegatedAmount)),t.isInitialized=0!==t.state,t.isFrozen=2===t.state,1===t.isNativeOption?(t.rentExemptReserve=h.d.fromBuffer(t.isNative),t.isNative=!0):(t.rentExemptReserve=null,t.isNative=!1),0===t.closeAuthorityOption?t.closeAuthority=null:t.closeAuthority=new b.d(t.closeAuthority),t},P=function(e){if(e.length!==h.b.span)throw new Error("Not a valid Mint");var t=h.b.decode(e);return 0===t.mintAuthorityOption?t.mintAuthority=null:t.mintAuthority=new b.d(t.mintAuthority),t.supply=h.d.fromBuffer(t.supply),t.isInitialized=0!==t.isInitialized,0===t.freezeAuthorityOption?t.freezeAuthority=null:t.freezeAuthority=new b.d(t.freezeAuthority),t}}).call(this,n(12).Buffer)},1360:function(e,t){},1482:function(e,t,n){},1483:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(65),o=n.n(i),c=(n(788),n(552),n(205)),s=n(74),u=n(98),l=n(89),d=n(136),f=n(1489),p=n(1495),b=n(138),h=n(114),m=n(542),O=n.n(m),g=n(31),v=n.n(g),j=(n(1482),n(29)),T=function(e){var t,n=e.style,a=e.className,i="string"===typeof e.address?e.address:null===(t=e.address)||void 0===t?void 0:t.toBase58(),o=Object(r.useRef)();return Object(r.useEffect)((function(){i&&o.current&&(o.current.innerHTML="",o.current.className=a||"",o.current.appendChild(O()((null===n||void 0===n?void 0:n.width)||16,parseInt(v.a.decode(i).toString("hex").slice(5,15),16))))}),[i,n,a]),Object(j.jsx)("div",{className:"identicon-wrapper",ref:o,style:e.style})},y=n(26),A=function(e){var t=Object(u.b)().wallet,n=Object(d.f)().account;return(null===t||void 0===t?void 0:t.publicKey)?Object(j.jsxs)("div",{className:"wallet-wrapper",children:[Object(j.jsxs)("span",{children:[h.b.format(((null===n||void 0===n?void 0:n.lamports)||0)/y.c)," SOL"]}),Object(j.jsxs)("div",{className:"wallet-key",children:[Object(h.c)("".concat(t.publicKey)),Object(j.jsx)(T,{address:t.publicKey.toBase58(),style:{marginLeft:"0.5rem",display:"flex"}})]})]}):null},w=n(1488),E=n(1494),x=function(){var e=Object(u.b)(),t=e.connected,n=e.disconnect,r=Object(l.e)(),a=r.endpoint,i=r.setEndpoint;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{style:{display:"grid"},children:["Network:"," ",Object(j.jsx)(E.a,{onSelect:i,value:a,style:{marginBottom:20},children:l.b.map((function(e){var t=e.name,n=e.endpoint;return Object(j.jsx)(E.a.Option,{value:n,children:t},n)}))}),t&&Object(j.jsx)(b.a,{type:"primary",onClick:n,children:"Disconnect"})]})})},_=n(215),S=n(274),I=n(1492),L=n(1493),k=(new y.d("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),function(e){var t=Object(u.b)(),n=(t.wallet,t.connected),r=t.connect,a=t.select,i=(t.provider,e.onClick,e.children,e.disabled),o=(e.allowWalletChange,Object(S.a)(e,["onClick","children","disabled","allowWalletChange"]),Object(l.d)(),new y.d("5Ds6QvdZAqwVozdu2i6qzjXm8tmBttV6uHNg4YU8rB1P"),Object(j.jsx)(I.a,{children:Object(j.jsx)(I.a.Item,{onClick:a,children:"Change Wallet"},"3")}));return Object(j.jsx)(L.a.Button,{onClick:r,disabled:n&&i,overlay:o,children:_.a.CONNECT_LABEL})}),N=function(e){var t=Object(u.b)().connected;return Object(j.jsxs)("div",{tabIndex:1,className:"App-Bar-right",children:[t?Object(j.jsx)(A,{}):Object(j.jsx)(k,{type:"text",size:"large",allowWalletChange:!0,style:{color:"#2abdd2"}}),Object(j.jsx)(p.a,{placement:"topRight",title:_.a.SETTINGS_TOOLTIP,content:Object(j.jsx)(x,{}),trigger:"click",children:Object(j.jsx)(b.a,{shape:"circle",size:"large",type:"text",icon:Object(j.jsx)(w.a,{})})}),e.right]})},C=f.a.Header,B=f.a.Content,R=a.a.memo((function(e){return Object(j.jsx)("div",{className:"App wormhole-bg",children:Object(j.jsxs)(f.a,{children:[Object(j.jsxs)(C,{className:"App-Bar",children:[Object(j.jsx)(c.Link,{to:"/",children:Object(j.jsx)("div",{className:"app-title",children:Object(j.jsx)("h2",{children:"On-chain NFT Art generator"})})}),Object(j.jsx)(N,{})]}),Object(j.jsx)(B,{style:{padding:"0 0px"},children:e.children})]})})})),D=n(357);function P(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(c.HashRouter,{basename:"/",children:Object(j.jsx)(l.a,{children:Object(j.jsx)(u.a,{children:Object(j.jsx)(d.a,{children:Object(j.jsx)(R,{children:Object(j.jsx)(s.Switch,{children:Object(j.jsx)(s.Route,{exact:!0,path:"/",component:function(){return Object(j.jsx)(D.a,{})}})})})})})})})})}var W=function(){return Object(j.jsx)(P,{})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(W,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},208:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(0);var r=n(551),a=n(29);function i(e){var t=e.message,n=void 0===t?"":t,i=e.description,o=void 0===i?void 0:i,c=e.txid,s=void 0===c?"":c,u=e.type,l=void 0===u?"info":u,d=e.placement,f=void 0===d?"topLeft":d;s&&(o=Object(a.jsx)(a.Fragment,{})),r.a[l]({message:Object(a.jsx)("span",{style:{color:"black"},children:n}),description:Object(a.jsx)("span",{style:{color:"black",opacity:.5},children:o}),placement:f,style:{backgroundColor:"white"}})}},215:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return s}));var r={CONNECT_LABEL:"Connect",SEND_LABEL:"Send",TRANSACTION_2_LABEL:"Create new card",BORROWING_POWER_USED:"Borrowing Power Used",BORROWING_POWER_VALUE:"Borrowing Power",BORROWED_VALUE:"You borrowed",GIVE_SOL:"Give me SOL",CAST_CARD:"Cast card",CREATE_FIGHT:"Create fight",LIQUIDATION_INFO:"This view displays all loans that can be liquidated. A liquidation is a process where borrower collateral does not cover value of the loan. It is represented by health factor falling below 1.0. When a loan is liquidated, an liquidator can purchase collateral at a discount by repaing the portio of the loan. ",FAUCET_INFO:"This faucet will help you fund your accounts outside of Solana main network.",ACCOUNT_FUNDED:"Account funded.",REPAY_QUESTION:"How much would you like to repay?",REPAY_ACTION:"Repay",RESERVE_STATUS_TITLE:"Reserve Status & Configuration",AUDIT_WARNING:"Oyster is an unaudited software project used for internal purposes at the Solana Foundation. This app is not for public use.",FOOTER:'This page was produced by the Solana Foundation ("SF") for internal educational and inspiration purposes only. SF does not encourage, induce or sanction the deployment, integration or use of Oyster or any similar application (including its code) in violation of applicable laws or regulations and hereby prohibits any such deployment, integration or use. Anyone using this code or a derivation thereof must comply with applicable laws and regulations when releasing related software.',MENU_HOME:"Home",MENU_DASHBOARD:"Dashboard",DASHBOARD_INFO:"Connect to a wallet to view your deposits/loans.",TRANSACTIONS_INFO:"Connect to a wallet to view your transactions.",NO_LOANS_NO_DEPOSITS:"No loans or deposits.",MENU_DEPOSIT:"Deposit",DEPOSITS:"Deposits",BORROWS:"Borrows",LOAN_TO_VALUE:"Loan to value",MENU_BORROW:"Borrow",MENU_LIQUIDATE:"Liquidate",MENU_FAUCET:"Faucet",MENU_TRANSACTION:"Transactions",MARGIN_TRADING:"Margin Trading",APP_TITLE:"Solcery",CONNECT_BUTTON:"Connect",WALLET_TOOLTIP:"Wallet public key",WALLET_BALANCE:"Wallet balance",SETTINGS_TOOLTIP:"Settings",SELECT_COLLATERAL:"Select collateral",COLLATERAL:"Collateral",BORROW_QUESTION:"How much would you like to borrow?",BORROW_ACTION:"Borrow",NO_COLLATERAL:"No collateral",NO_DEPOSITS:"No deposits",NO_LOANS:"No loans",NOTHING_BORROWED:"Nothing borrowed yet",NOTHING_BORROWED_MESSAGE:"There will be a list of all the assets you have borrowed. For now, it's empty since you have not borrowed.",BORROW_NOW:"Borrow now",LIQUIDATE_QUESTION:"How much would you like to liquidate?",LIQUIDATE_ACTION:"Liquidate",LIQUIDATE_NO_LOANS:"There are no loans to liquidate.",TABLE_TITLE_ASSET:"Asset",TABLE_TITLE_YOUR_LOAN_BALANCE:"Loan balance",TABLE_TITLE_LOAN_BALANCE:"Loan balance",TABLE_TITLE_COLLATERAL_BALANCE:"Collateral",TABLE_TITLE_DEPOSIT_BALANCE:"Your deposits",TABLE_TITLE_APY:"APY",TABLE_TITLE_LTV:"LTV",TABLE_TITLE_HEALTH:"Health Factor",TABLE_TITLE_BORROW_APY:"Borrow APY",TABLE_TITLE_DEPOSIT_APY:"Deposit APY",TABLE_TITLE_TOTAL_BORROWED:"Total Borrowed",TABLE_TITLE_MARKET_SIZE:"Market Size",TABLE_TITLE_ACTION:"Action",TABLE_TITLE_DEPOSITS:"Deposits",TABLE_TITLE_WITHDRAWS:"Withdraws",TABLE_TITLE_BORROWS:"Borrows",TABLE_TITLE_REPAY_OBLIGATIONS:"Repay Obligations",TABLE_TITLE_LIQUIDATE_OBLIGATIONS:"Liquidate Obligations",MAX_LTV:"Maximum LTV",LIQUIDATION_THRESHOLD:"Liquidation threshold",LIQUIDATION_PENALTY:"Liquidation penalty",TABLE_TITLE_MAX_BORROW:"Available for you",DASHBOARD_TITLE_LOANS:"Loans",DASHBOARD_TITLE_DEPOSITS:"Deposits",DEPOSIT_QUESTION:"How much would you like to deposit?",WITHDRAW_ACTION:"Withdraw",WITHDRAW_QUESTION:"How much would you like to withdraw?",DASHBOARD_ACTION:"Go to dashboard",GO_BACK_ACTION:"Go back",DEPOSIT_ACTION:"Deposit",TOTAL_TITLE:"Total",TRADING_TABLE_TITLE_MY_COLLATERAL:"Chosen Collateral",TRADING_TABLE_TITLE_DESIRED_ASSET:"Desired Asset",TRADING_TABLE_TITLE_MULTIPLIER:"Leverage",TRADING_TABLE_TITLE_ASSET_PRICE:"Asset Price",TRADING_TABLE_TITLE_LIQUIDATION_PRICE:"Liquidation Price",TRADING_TABLE_TITLE_APY:"APY",TRADING_TABLE_TITLE_ACTIONS:"Action",TRADING_ADD_POSITION:"Add Position",MARGIN_TRADE_ACTION:"Margin Trade",MARGIN_TRADE_CHOOSE_COLLATERAL_AND_LEVERAGE:"Please choose your collateral and leverage.",MARGIN_TRADE_QUESTION:"Please choose how much of this asset you wish to purchase.",TABLE_TITLE_BUYING_POWER:"Total Buying Power",NOT_ENOUGH_MARGIN_MESSAGE:"Not enough buying power in oyster to make this trade at this leverage.",SET_MORE_MARGIN_MESSAGE:"You need more margin to match this leverage amount to make this trade.",LEVERAGE_LIMIT_MESSAGE:"You will need more margin to make this trade.",NO_DEPOSIT_MESSAGE:"You need to deposit coin of this type into oyster before trading with it on margin.",NO_COLL_TYPE_MESSAGE:"Choose Collateral CCY",SAFER:"Safer",RISKIER:"Riskier"},a=n(67),i=n.n(a),o=new i.a(10),c=(o.pow(new i.a(18)),o.pow(new i.a(18))),s=(o.pow(new i.a(27)),new i.a(0))},276:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s}));var r=n(26),a=new r.d("So11111111111111111111111111111111111111112"),i=new r.d("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),o=(new r.d("TokenLending1111111111111111111111111111111"),new r.d("SwaPpA9LAaLfeLi3a68M4DjnLqgtticKg6CnyNwgAC8"),[{name:"mainnet-beta"},{name:"testnet"},{name:"devnet"},{name:"localnet"}]),c=function(e){o.find((function(t){return t.name===e}))},s=function(){return{token:i}}},314:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(8),a=n.n(r),i=n(13),o=new(n(833))({host:"ipfs.infura.io",port:5001,protocol:"https"}),c=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.files.add(t);case 2:return n=e.sent,e.next=5,n[0].hash;case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},357:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return y}));var r=n(8),a=n.n(r),i=n(47),o=n(13),c=n(0),s=n(314),u=n(89),l=n(98),d=n(26),f=n(441),p=n(108),b=n(74),h=n(1484),m=n(221),O=n(1485),g=n(138),v=n(29);function j(){return T.apply(this,arguments)}function T(){return(T=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=function(){var t=Object(c.useState)(null),n=Object(i.a)(t,2),r=n[0],j=n[1],T=Object(c.useState)(null),y=Object(i.a)(T,2),A=(y[0],y[1]),w=Object(c.useState)(!0),E=Object(i.a)(w,2),x=E[0],_=E[1],S=Object(u.d)(),I=Object(l.b)().wallet,L=new d.d("DABc9T6PSUuhfAYwnTqRrhpGENTDGpxnZHyCaqfsAe71"),k=new d.d("FdWnQ6zLSCmJiBPPC9dHD2PM9KvMzYzLaS2Mj4wXTdAH"),N=new d.d("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),C=new d.d("11111111111111111111111111111111"),B=new d.d("SysvarRent111111111111111111111111111111111"),R=new d.d("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),D=new d.d("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),P=0;function W(t){var n=t.reduce((function(e,t){return e.length+t.length})),r=new e(n),a=0;return t.forEach((function(e){e.copy(r,a,0),a+=e.length})),r}var M=function(){var t=Object(o.a)(a.a.mark((function t(){var n,r,i,o,c,u,l,p,b,h,m,O,g,v,T,y,w,E,x,_,k,B,R,D,M,U,G,F,H,z,Y,K,Q,q,V,J,X,Z;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==I){t.next=2;break}return t.abrupt("return");case 2:if(n=I.publicKey){t.next=5;break}return t.abrupt("return");case 5:return console.log("Upload & update metadata",P),r=[],[],e.from("mint","utf8"),82,t.next=12,d.d.findProgramAddress([e.from("mint","utf8"),n.toBuffer(),e.from([P])],L);case 12:return i=t.sent,o=i[0],t.next=16,d.d.findProgramAddress([e.from("mint","utf8"),o.toBuffer()],L);case 16:return c=t.sent,u=c[0],t.next=20,d.d.findProgramAddress([e.from("metadata","utf8"),N.toBuffer(),o.toBuffer()],N);case 20:return l=t.sent,p=l[0],console.log(p.toBase58()),console.log("fetch metadata from getaccountinfo"),t.next=26,S.getAccountInfo(p);case 26:if(null!==(b=t.sent)){t.next=30;break}return console.log("failed to fetch"),t.abrupt("return");case 30:for(h=b.data,m=h.toString("ascii",69,97),console.log(m),A(m),O=h.toString("ascii",105,108),console.log(O),A(O),g=h.subarray(119,291),console.log("pgm file, ",g),v=e.from(g).toString(),T=e.from(v,"base64"),y=T,console.log("pgm_im:",y),w=10,E=new Uint8ClampedArray(25600),x=0;x<64;x++)for(_=x%8,k=Math.floor(x/8),B=0;B<w;B++)for(R=0;R<w;R++)E[320*k*10+320*B+_*w*4+4*R+1]=17*(15&y[2*x]),E[320*k*10+320*B+_*w*4+4*R+0]=17*(y[2*x]>>4&15),E[320*k*10+320*B+_*w*4+4*R+3]=17*(15&y[2*x+1]),E[320*k*10+320*B+_*w*4+4*R+2]=17*(y[2*x+1]>>4&15);if((D=document.createElement("canvas")).width=D.height=80,null!==(M=D.getContext("2d"))){t.next=52;break}return t.abrupt("return");case 52:return U=new ImageData(E,M.canvas.width,M.canvas.height),M.putImageData(U,0,0),console.log("put image data on ctx",U),"image/png",G=D.toDataURL("image/png"),console.log("dataurl",G),F=e.from(G.split(",")[1],"base64"),console.log("pngdata",F),j(G),t.next=63,Object(s.a)(F);case 63:return H=t.sent,z="https://ipfs.io/ipfs/"+H,console.log(z),Y={name:m,symbol:O,description:"Fully on-chain generative pixel art.",seller_fee_basis_points:500,collection:"Generation 0",image:z,animation_url:"",attributes:[],external_url:"",properties:{files:{uri:z,type:"image/png"},category:"image",creators:[{address:"FdWnQ6zLSCmJiBPPC9dHD2PM9KvMzYzLaS2Mj4wXTdAH",share:100}]}},K=JSON.stringify(Y),Q=e.from(K),console.log("submitted..."),t.next=72,Object(s.a)(Q);case 72:return q=t.sent,V="https://ipfs.io/ipfs/"+q,console.log(V),J=new d.h({keys:[{pubkey:N,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:C,isSigner:!1,isWritable:!1}],programId:L,data:W([e.from([2]),e.from(V)])}),t.next=78,Object(f.sendTransactionWithRetry)(S,I,[J],r);case 78:return X=t.sent,Z=X.txid,t.prev=80,t.next=83,S.confirmTransaction(Z,"max");case 83:t.next=87;break;case 85:t.prev=85,t.t0=t.catch(80);case 87:console.log("Metadata update Tx sent",Z);case 88:case"end":return t.stop()}}),t,null,[[80,85]])})));return function(){return t.apply(this,arguments)}}(),U=function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P=t;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var t=Object(o.a)(a.a.mark((function t(){var n,r,i,o,c,u,l,b,h,m,O,g,v,T,y,w,E,x,M,U,G,F,H,z,Y,K,Q,q,V,J,X,Z,$,ee,te,ne,re,ae,ie,oe,ce,se,ue,le,de,fe,pe,be,he,me;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==I){t.next=2;break}return t.abrupt("return");case 2:if(n=I.publicKey){t.next=5;break}return t.abrupt("return");case 5:return r=[],i=[],e.from("mint","utf8"),82,t.next=11,d.d.findProgramAddress([e.from("mint","utf8"),n.toBuffer(),e.from([P])],L);case 11:return o=t.sent,c=o[0],t.next=15,d.d.findProgramAddress([e.from("mint","utf8"),c.toBuffer()],L);case 15:return u=t.sent,l=u[0],t.next=19,p.c.getAssociatedTokenAddress(D,R,c,n);case 19:return b=t.sent,t.next=22,d.d.findProgramAddress([e.from("cnt_pay","utf8")],L);case 22:return h=t.sent,m=h[0],console.log(m.toBase58()),O=new d.h({keys:[{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:L,isSigner:!1,isWritable:!1},{pubkey:C,isSigner:!1,isWritable:!1},{pubkey:R,isSigner:!1,isWritable:!1},{pubkey:B,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:D,isSigner:!1,isWritable:!1},{pubkey:b,isSigner:!1,isWritable:!0}],programId:L,data:e.from([0,P])}),i.push(O),t.next=29,d.d.findProgramAddress([e.from("metadata","utf8"),N.toBuffer(),c.toBuffer()],N);case 29:return g=t.sent,v=g[0],t.next=33,d.d.findProgramAddress([e.from("metadata","utf8"),N.toBuffer(),c.toBuffer(),e.from("edition","utf8")],N);case 33:return T=t.sent,y=T[0],t.next=37,d.d.findProgramAddress([e.from("cnt_meta","utf8")],L);case 37:return w=t.sent,E=w[0],console.log(E.toBase58()),x=new d.h({keys:[{pubkey:E,isSigner:!1,isWritable:!0},{pubkey:N,isSigner:!1,isWritable:!1},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!1},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:C,isSigner:!1,isWritable:!1},{pubkey:R,isSigner:!1,isWritable:!1},{pubkey:B,isSigner:!1,isWritable:!1}],programId:L,data:e.from([1])}),i.push(x),_(!1),t.next=45,Object(f.sendTransactionWithRetry)(S,I,i,r);case 45:return M=t.sent,U=M.txid,t.prev=47,t.next=50,S.confirmTransaction(U,"max");case 50:t.next=54;break;case 52:t.prev=52,t.t0=t.catch(47);case 54:return console.log("Mint transaction sent",U),t.next=57,S.getParsedConfirmedTransaction(U,"confirmed");case 57:return t.next=59,S.getAccountInfo(v);case 59:if(null!==(G=t.sent)){t.next=62;break}return t.abrupt("return");case 62:for(F=G.data,H=F.toString("ascii",69,97),console.log(H),A(H),z=F.toString("ascii",105,108),console.log(z),A(z),Y=F.subarray(119,291),console.log("pgm file, ",Y),K=e.from(Y).toString(),Q=e.from(K,"base64"),q=Q,console.log("pgm_im:",q),V=10,J=new Uint8ClampedArray(25600),X=0;X<64;X++)for(Z=X%8,$=Math.floor(X/8),ee=0;ee<V;ee++)for(te=0;te<V;te++)J[320*$*10+320*ee+Z*V*4+4*te+1]=17*(15&q[2*X]),J[320*$*10+320*ee+Z*V*4+4*te+0]=17*(q[2*X]>>4&15),J[320*$*10+320*ee+Z*V*4+4*te+3]=17*(15&q[2*X+1]),J[320*$*10+320*ee+Z*V*4+4*te+2]=17*(q[2*X+1]>>4&15);if((ne=document.createElement("canvas")).width=ne.height=80,null!==(re=ne.getContext("2d"))){t.next=84;break}return t.abrupt("return");case 84:return ae=new ImageData(J,re.canvas.width,re.canvas.height),re.putImageData(ae,0,0),console.log("put image data on ctx",ae),"image/png",ie=ne.toDataURL("image/png"),console.log("dataurl",ie),oe=e.from(ie.split(",")[1],"base64"),console.log("pngdata",oe),j(ie),console.log("submitted..."),t.next=96,Object(s.a)(oe);case 96:return ce=t.sent,se="https://ipfs.io/ipfs/"+ce,console.log(se),ue={name:H,symbol:z,description:"Fully on-chain generative pixel art.",seller_fee_basis_points:500,collection:"Generation 0",image:se,animation_url:"",attributes:[],external_url:"",properties:{files:{uri:se,type:"image/png"},category:"image",creators:[{address:"FdWnQ6zLSCmJiBPPC9dHD2PM9KvMzYzLaS2Mj4wXTdAH",share:100}]}},le=JSON.stringify(ue),de=e.from(le),console.log("upload json metadata..."),t.next=105,Object(s.a)(de);case 105:return fe=t.sent,pe="https://ipfs.io/ipfs/"+fe,console.log(pe),be=new d.h({keys:[{pubkey:N,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!1},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:C,isSigner:!1,isWritable:!1}],programId:L,data:W([e.from([2]),e.from(pe)])}),t.next=111,Object(f.sendTransactionWithRetry)(S,I,[be],r);case 111:return he=t.sent,me=he.txid,t.prev=113,t.next=116,S.confirmTransaction(me,"max");case 116:t.next=120;break;case 118:t.prev=118,t.t1=t.catch(113);case 120:console.log("metadata update Tx sent",me),_(!0);case 122:case"end":return t.stop()}}),t,null,[[47,52],[113,118]])})));return function(){return t.apply(this,arguments)}}();Object(b.useParams)().page;return Object(v.jsxs)(h.a,{gutter:[16,16],align:"middle",children:[Object(v.jsxs)(m.a,{span:24,children:[Object(v.jsx)("h1",{children:"\u30aa\u30f3\u30c1\u30a7\u30a4\u30f3NFT\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf on Solana"}),Object(v.jsx)("img",{src:"generative.gif"}),Object(v.jsx)("h3",{children:"\u30b7\u30fc\u30c9\u306b0\u304b\u308999\u306e\u5024\u3092\u5165\u529b\u3057\u3066MINT\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3001"}),Object(v.jsx)("h3",{children:"2\u56de\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u627f\u8a8d\u304c\u51fa\u308b\u306e\u3067\u305d\u3053\u307e\u3067\u653e\u7f6e\uff0860\u79d2\u3050\u3089\u3044\uff1f\uff09 "}),Object(v.jsx)("h3",{children:"\u30ac\u30b9\u4ee3\u7684\u306a\u611f\u3058\u30670.01-0.02 SOL\u3050\u3089\u3044\u4f7f\u3044\u307e\u3059\u3002"}),Object(v.jsx)("h3",{children:"\u540c\u3058\u30b7\u30fc\u30c9\u306f\u518d\u5229\u7528\u3067\u304d\u306a\u3044\u306e\u30671\u3064\u306e\u30a6\u30a9\u30ec\u30c3\u30c8\u3067\u6700\u5927100\u500bmint\u3067\u304d\u307e\u3059\u3002"})]}),Object(v.jsxs)(m.a,{span:24,children:[r&&Object(v.jsx)("img",{alt:"icon",src:r}),x?Object(v.jsx)(v.Fragment,{}):Object(v.jsx)("h1",{children:"Processing..."})]}),Object(v.jsxs)(m.a,{span:24,children:["\u30b7\u30fc\u30c9\u5024:",Object(v.jsx)(O.a,{min:0,max:99,defaultValue:0,onChange:function(e){return U(e)}}),Object(v.jsx)(g.a,{onClick:function(){return G()},children:"MINT"}),Object(v.jsx)("h3",{children:"Processing\u304c\u8868\u793a\u3055\u308c\u3066\u308b\u9593\u306f\u5b9f\u884c\u4e2d\u306a\u306e\u3067\u5f85\u3063\u3066\u304f\u3060\u3055\u3044\uff08\u9014\u4e2d\u3067\u4e2d\u65ad\u3055\u308c\u307e\u3059\uff09"})]}),Object(v.jsx)(m.a,{span:2}),Object(v.jsxs)(m.a,{span:20,children:[Object(v.jsx)("h3",{children:"MINT\u3092\u62bc\u3059\u3068\u30011\u3064\u76ee\u306e\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3067\u753b\u50cf\u3092\u30e1\u30bf\u30c7\u30fc\u30bf\u5185\u306b\u542b\u3093\u3060\u30c8\u30fc\u30af\u30f3\u3092\u767a\u884c\u3057\u307e\u3059\u3002"}),Object(v.jsx)("h3",{children:"\u305d\u306e\u753b\u50cf\u3092IPFS\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u30012\u3064\u76ee\u306e\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3067\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u307e\u3059\u3002"}),Object(v.jsx)("h3",{children:"\u305d\u306e\u4ed6\u8a73\u7d30\u306f\u6c17\u304c\u5411\u3044\u305f\u3089\u305d\u306e\u3046\u3061\u4e0a\u3052\u308b\uff08\u304b\u3082\uff09"}),Object(v.jsx)("a",{href:"https://twitter.com/ek_ss",children:"@ek_ss(twitter)"})]}),Object(v.jsx)(m.a,{span:2}),Object(v.jsxs)(m.a,{span:24,children:[Object(v.jsx)("h2",{children:"Tx\u304c\u4e2d\u65ad\u3055\u308c\u3066\u753b\u50cf\u304c\u6b63\u5e38\u306b\u8868\u793a\u3055\u308c\u306a\u3044\u6642\u306e\u305f\u3081\u306eMetadata Update\u30dc\u30bf\u30f3"}),Object(v.jsx)("h3",{children:"\u30b7\u30fc\u30c9\u5024\u3092\u3042\u308f\u305b\u3066\u304b\u3089\u62bc\u3059\u3002"}),Object(v.jsx)(g.a,{onClick:function(){return M()},children:"UpdateMetadata"})]})]})}}).call(this,n(12).Buffer)},492:function(e,t){},552:function(e,t,n){},697:function(e,t){},735:function(e,t){},772:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(36),a=n(33),i=n(91),o=function e(t,n,r){Object(a.a)(this,e),this.id=void 0,this.parser=void 0,this.isNew=void 0,this.id=t,this.parser=r,this.isNew=n};o.type="CacheUpdate";var c=function e(t){Object(a.a)(this,e),this.id=void 0,this.id=t};c.type="CacheUpdate";var s=function e(t){Object(a.a)(this,e),this.ids=void 0,this.ids=t};s.type="MarketUpdate";var u=function e(){Object(a.a)(this,e)};u.type="CacheDelete";var l=function(){function e(){Object(a.a)(this,e),this.emitter=new i.EventEmitter}return Object(r.a)(e,[{key:"onMarket",value:function(e){var t=this;return this.emitter.on(s.type,e),function(){return t.emitter.removeListener(s.type,e)}}},{key:"onCache",value:function(e){var t=this;return this.emitter.on(o.type,e),function(){return t.emitter.removeListener(o.type,e)}}},{key:"raiseMarketUpdated",value:function(e){this.emitter.emit(s.type,new s(e))}},{key:"raiseCacheUpdated",value:function(e,t,n){this.emitter.emit(o.type,new o(e,t,n))}},{key:"raiseCacheDeleted",value:function(e){this.emitter.emit(c.type,new c(e))}},{key:"raiseCacheCleared",value:function(){this.emitter.emit(u.type,new u)}}]),e}()},773:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(136);function a(){return{userAccounts:Object(r.e)().userAccounts}}},788:function(e,t,n){},789:function(e,t){},791:function(e,t){},812:function(e,t){},813:function(e,t){},844:function(e,t){},846:function(e,t){},852:function(e,t){},854:function(e,t){},885:function(e,t){},886:function(e,t){},89:function(e,t,n){"use strict";n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return y})),n.d(t,"d",(function(){return A})),n.d(t,"e",(function(){return w})),n.d(t,"c",(function(){return x}));var r=n(8),a=n.n(r),i=n(40),o=n(13),c=n(47),s=n(114),u=n(26),l=n(0),d=n.n(l),f=n(208),p=n(1490),b=n(29),h=function(e){var t,n,r=e.type,a=e.code,i="string"===typeof e.address?e.address:null===(t=e.address)||void 0===t?void 0:t.toBase58();if(!i)return null;var o=null!==(n=e.length)&&void 0!==n?n:9;return Object(b.jsx)("a",{href:"https://explorer.solana.com/".concat(r,"/").concat(i),target:"_blank",title:i,style:e.style,children:a?Object(b.jsx)(p.a.Text,{style:e.style,code:!0,children:Object(s.c)(i,o)}):Object(s.c)(i,o)})},m=n(276),O=n(136),g=n(216),v=[{name:"mainnet-beta",endpoint:"https://api.mainnet-beta.solana.com",chainID:g.ENV.MainnetBeta},{name:"devnet",endpoint:Object(u.i)("devnet"),chainID:g.ENV.Devnet},{name:"localnet",endpoint:"http://127.0.0.1:8899",chainID:g.ENV.Devnet}],j=v[0].endpoint,T=d.a.createContext({endpoint:j,setEndpoint:function(){},slippage:.25,setSlippage:function(e){},connection:new u.b(j,"recent"),sendConnection:new u.b(j,"recent"),env:v[0].name,tokens:[],tokenMap:new Map});function y(e){var t=e.children,n=void 0===t?void 0:t,r=Object(s.d)("connectionEndpts",v[0].endpoint),d=Object(c.a)(r,2),f=d[0],p=d[1],h=Object(s.d)("slippage",.25.toString()),j=Object(c.a)(h,2),y=j[0],A=j[1],w=Object(l.useMemo)((function(){return new u.b(f,"recent")}),[f]),E=Object(l.useMemo)((function(){return new u.b(f,"recent")}),[f]),x=v.find((function(e){return e.endpoint===f}))||v[0],_=x.name,S=Object(l.useState)([]),I=Object(c.a)(S,2),L=I[0],k=I[1],N=Object(l.useState)(new Map),C=Object(c.a)(N,2),B=C[0],R=C[1];return Object(l.useEffect)((function(){O.c.clear(),Object(o.a)(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new g.TokenListProvider).resolve();case 2:return t=e.sent,n=t.filterByChainId(x.chainID).excludeByTag("nft").getList(),r=n.reduce((function(e,t){return e.set(t.address,t),e}),new Map),e.next=7,Object(O.d)(w,Object(i.a)(r.keys()),"single");case 7:(o=e.sent).keys.forEach((function(e,t){var n=o.array[t];n&&O.c.add(new u.d(e),n,O.b)})),R(r),k(n);case 11:case"end":return e.stop()}}),e)})))()}),[w,x]),Object(m.c)(_),Object(l.useEffect)((function(){var e=w.onAccountChange((new u.a).publicKey,(function(){}));return function(){w.removeAccountChangeListener(e)}}),[w]),Object(l.useEffect)((function(){var e=w.onSlotChange((function(){return null}));return function(){w.removeSlotChangeListener(e)}}),[w]),Object(l.useEffect)((function(){var e=E.onAccountChange((new u.a).publicKey,(function(){}));return function(){E.removeAccountChangeListener(e)}}),[E]),Object(l.useEffect)((function(){var e=E.onSlotChange((function(){return null}));return function(){E.removeSlotChangeListener(e)}}),[E]),Object(b.jsx)(T.Provider,{value:{endpoint:f,setEndpoint:p,slippage:parseFloat(y),setSlippage:function(e){return A(e.toString())},connection:w,sendConnection:E,tokens:L,tokenMap:B,env:_},children:n})}function A(){return Object(l.useContext)(T).connection}function w(){var e=Object(l.useContext)(T);return{endpoint:e.endpoint,setEndpoint:e.setEndpoint,env:e.env,tokens:e.tokens,tokenMap:e.tokenMap}}var E=function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.confirmTransaction(n,"max");case 2:return e.next=4,t.getParsedConfirmedTransaction(n);case 4:return r=e.sent,i=[],(null===r||void 0===r?void 0:r.meta)&&r.meta.logMessages&&r.meta.logMessages.forEach((function(e){for(var t,n=/Error: (.*)/gm;null!==(t=n.exec(e));)t.index===n.lastIndex&&n.lastIndex++,t.length>1&&i.push(t[1])})),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=function(){var e=Object(o.a)(a.a.mark((function e(t,n,r,c){var s,l,d,p,m,O=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=!(O.length>4&&void 0!==O[4])||O[4],d=O.length>5?O[5]:void 0,O.length>6?O[6]:void 0,null===n||void 0===n?void 0:n.publicKey){e.next=5;break}throw new Error("Wallet is not connected");case 5:return p=new u.g,r.forEach((function(e){return p.add(e)})),e.next=9,t.getRecentBlockhash("max");case 9:return p.recentBlockhash=e.sent.blockhash,(s=p).setSigners.apply(s,[n.publicKey].concat(Object(i.a)(c.map((function(e){return e.publicKey}))))),c.length>0&&(m=p).partialSign.apply(m,Object(i.a)(c)),e.next=14,n.signTransaction(p).then(function(){var e=Object(o.a)(a.a.mark((function e(n){var r,i,o,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d&&d(),r=(p=n).serialize(),i={skipPreflight:!0,commitment:"singleGossip"},e.next=6,t.sendRawTransaction(r,i);case 6:if(o=e.sent,!l){e.next=17;break}return e.next=10,t.confirmTransaction(o,i&&i.commitment);case 10:if(!(null===(c=e.sent.value)||void 0===c?void 0:c.err)){e.next=17;break}return e.next=14,E(t,o);case 14:throw s=e.sent,Object(f.a)({message:"Transaction failed...",description:Object(b.jsxs)(b.Fragment,{children:[s.map((function(e){return Object(b.jsx)("div",{children:e})})),Object(b.jsx)(h,{address:o,type:"transaction"})]}),type:"error"}),new Error("Raw transaction ".concat(o," failed (").concat(JSON.stringify(c),")"));case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},912:function(e,t){},955:function(e,t){},962:function(e,t){},964:function(e,t){},98:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return _}));var r=n(47),a=n(770),i=n(1491),o=n(138),c=n(0),s=n.n(c),u=n(208),l=n(357),d=n(89),f=n(114),p=n(8),b=n.n(p),h=n(13),m=n(33),O=n(36),g=n(79),v=n(62),j=n(63),T=n(91),y=function(e){Object(v.a)(n,e);var t=Object(j.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.call(this))._handleConnect=function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];(t=e).emit.apply(t,["connect"].concat(r))},e._handleDisconnect=function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];(t=e).emit.apply(t,["disconnect"].concat(r))},e.connect=e.connect.bind(Object(g.a)(e)),e}return Object(O.a)(n,[{key:"_provider",get:function(){var e,t;if(null===(e=window)||void 0===e||null===(t=e.solana)||void 0===t?void 0:t.isPhantom)return window.solana}},{key:"connected",get:function(){var e;return(null===(e=this._provider)||void 0===e?void 0:e.isConnected)||!1}},{key:"autoApprove",get:function(){var e;return(null===(e=this._provider)||void 0===e?void 0:e.autoApprove)||!1}},{key:"signAllTransactions",value:function(){var e=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._provider){e.next=2;break}return e.abrupt("return",t);case 2:return e.abrupt("return",this._provider.signAllTransactions(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"publicKey",get:function(){var e;return null===(e=this._provider)||void 0===e?void 0:e.publicKey}},{key:"signTransaction",value:function(){var e=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._provider){e.next=2;break}return e.abrupt("return",t);case 2:return e.abrupt("return",this._provider.signTransaction(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e;if(this._provider){if(window.solana.isPhantom){var t,n;if(this._provider&&!this._provider.listeners("connect").length)null===(t=this._provider)||void 0===t||t.on("connect",this._handleConnect);if(!this._provider.listeners("disconnect").length)null===(n=this._provider)||void 0===n||n.on("disconnect",this._handleDisconnect);return null===(e=this._provider)||void 0===e?void 0:e.connect()}Object(u.a)({message:"Phantom Error",description:"Please install Phantom wallet from Chrome "})}}},{key:"disconnect",value:function(){this._provider&&this._provider.disconnect()}}]),n}(n.n(T).a),A=n(29),w=[{name:"Sollet",url:"https://www.sollet.io",icon:"".concat("https://raw.githubusercontent.com/solana-labs/oyster/main/assets/wallets/","sollet.svg")},{name:"Phantom",url:"https://phantom.app/",icon:"https://raydium.io/_nuxt/img/phantom.d9e3c61.png",adapter:y}],E=s.a.createContext({wallet:void 0,connected:!1,select:function(){},provider:void 0});function x(e){var t=e.children,n=void 0===t?null:t,s=Object(d.e)().endpoint,p=Object(c.useState)(!1),b=Object(r.a)(p,2),h=b[0],m=b[1],O=Object(f.d)("walletProvider"),g=Object(r.a)(O,2),v=g[0],j=g[1],T=Object(c.useMemo)((function(){return w.find((function(e){return e.url===v}))}),[v]),y=Object(c.useMemo)((function(){if(T)return new(T.adapter||a.a)(v,s)}),[T,v,s]),x=Object(c.useState)(!1),_=Object(r.a)(x,2),S=_[0],I=_[1];Object(c.useEffect)((function(){return y&&(y.on("connect",(function(){if(y.publicKey){I(!0),console.log("set connected");var e=y.publicKey.toBase58(),t=e.length>20?"".concat(e.substring(0,7),".....").concat(e.substring(e.length-7,e.length)):e;Object(u.a)({message:"Wallet update",description:"Connected to wallet "+t}),Object(l.b)()}})),y.on("disconnect",(function(){I(!1),console.log("set disconnected"),Object(u.a)({message:"Wallet update",description:"Disconnected from wallet"})}))),function(){I(!1),console.log("set disconnected"),y&&y.disconnect()}}),[y]),Object(c.useEffect)((function(){return y&&h&&(y.connect(),m(!1)),function(){}}),[y,h]);var L=Object(c.useState)(!1),k=Object(r.a)(L,2),N=k[0],C=k[1],B=Object(c.useCallback)((function(){return C(!0)}),[]),R=Object(c.useCallback)((function(){return C(!1)}),[]);return Object(A.jsxs)(E.Provider,{value:{wallet:y,connected:S,select:B,provider:T},children:[n,Object(A.jsx)(i.a,{title:"Select Wallet",okText:"Connect",visible:N,okButtonProps:{style:{display:"none"}},onCancel:R,width:400,children:w.map((function(e){return Object(A.jsx)(o.a,{size:"large",type:v===e.url?"primary":"ghost",onClick:function(){j(e.url),m(!0),R()},icon:Object(A.jsx)("img",{alt:"".concat(e.name),width:20,height:20,src:e.icon,style:{marginRight:8}}),style:{display:"block",width:"100%",textAlign:"left",marginBottom:8},children:e.name},e.name)}))})]})}function _(){var e=Object(c.useContext)(E),t=e.wallet,n=e.connected,r=e.provider,a=e.select;return{wallet:t,connected:n,provider:r,select:a,publicKey:null===t||void 0===t?void 0:t.publicKey,connect:function(){t?t.connect():a(),console.log("connect 1")},disconnect:function(){null===t||void 0===t||t.disconnect()}}}}},[[1483,1,2]]]);
//# sourceMappingURL=main.d7ff81e3.chunk.js.map